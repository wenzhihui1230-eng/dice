<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>é…’å±€éª°å­åŠ©æ‰‹</title>
<style>
body{margin:0;font-family:-apple-system;background:#f5f5f7;text-align:center}
h1{margin:10px;font-size:22px}
#dice{font-size:38px;margin:15px;line-height:1.4}
button{padding:12px 18px;margin:6px;border:none;border-radius:12px;font-size:15px;background:#007aff;color:white}
input{padding:10px;border-radius:10px;border:1px solid #ccc;font-size:16px;width:70%}
.panel{background:white;margin:10px;padding:15px;border-radius:15px;box-shadow:0 5px 10px rgba(0,0,0,.1)}
.hidden{display:none}
.small{color:#666;font-size:14px}
</style>
</head>
<body>

<h1>ğŸ² é…’å±€éª°å­åŠ©æ‰‹ Pro</h1>

<div class="panel">
<div id="dice">ğŸ² 1 1 1 1 1</div>
<button onclick="roll()">æ‘‡éª°å­</button>
<button onclick="toggleDice()">5éª° / 6éª°</button>
</div>

<div class="panel">
<input id="call" placeholder="å¦‚ï¼š3ä¸ª6">
<br>
<button onclick="judge()">ä»–äººå¼€æˆ‘</button>
<button onclick="startVoice()">ğŸ™ è¯­éŸ³</button>
<div id="result"></div>
</div>

<div class="panel">
<button onclick="toggle()">éšèº«æ¨¡å¼</button>
<div id="data" class="hidden"></div>
</div>

<div class="panel">
<div id="stats"></div>
</div>

<script>
let diceCount=5;
let dice=new Array(diceCount).fill(1);
let stat={win:0,lose:0};

function roll(){
 dice=new Array(diceCount).fill(0).map(()=>Math.floor(Math.random()*6)+1);
 document.getElementById("dice").innerText="ğŸ² "+dice.join(" ");
}

function toggleDice(){
 diceCount = diceCount==5?6:5;
 dice=new Array(diceCount).fill(1);
 roll();
}

function judge(){
 let t=document.getElementById("call").value;
 let m=t.match(/(\d+)\s*ä¸ª?\s*(\d+)/);
 if(!m)return;
 let need=+m[1], face=+m[2];
 let count=dice.filter(x=>x==face).length;
 let win=count>=need;
 if(win)stat.win++; else stat.lose++;
 document.getElementById("result").innerText=win?"âœ… æˆç«‹ï¼Œä½ èµ¢":"âŒ ä¸æˆç«‹ï¼Œä½ å–";
 updateStats();
 document.getElementById("data").innerText="éª°å­ï¼š"+dice.join(",")+" | "+face+"="+count;
}

function toggle(){
 document.getElementById("data").classList.toggle("hidden");
}

function updateStats(){
 document.getElementById("stats").innerText="ä½ èµ¢ï¼š"+stat.win+" æ¬¡ï½œä½ å–ï¼š"+stat.lose+" æ¬¡";
}

function startVoice(){
 let rec=new(window.SpeechRecognition||window.webkitSpeechRecognition)();
 rec.lang="zh-CN";
 rec.onresult=e=>{
   let t=e.results[0][0].transcript;
   document.getElementById("call").value=t.replace("ä¸ª","");
 }
 rec.start();
}
</script>

</body>
</html>
